<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ™‚åˆ»è¡¨ãƒ‡ãƒ¼ã‚¿ä½œæˆãƒ„ãƒ¼ãƒ«</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    table, th, td { border: 1px solid #999; border-collapse: collapse; padding: 5px; }
    textarea { width: 100%; height: 200px; }
    input, select, button { margin: 5px; padding: 5px; }
    label { display: inline-block; margin: 5px 0; }
  </style>
</head>
<body>
    â—‹æ™‚åˆ»è¡¨ãƒ‡ãƒ¼ã‚¿ä½œæˆãƒ„ãƒ¼ãƒ«
<h2>åˆ—è»ŠåŸºæœ¬æƒ…å ±</h2>
<label>åˆ—è»Šç•ªå·: <input id="trainNumber" type="text"></label>
<label>ç¨®åˆ¥: <input id="type" type="text"></label>
<label>å¹³æ—¥/åœŸä¼‘æ—¥: 
  <select id="dayType">
    <option value="å¹³æ—¥">å¹³æ—¥</option>
    <option value="åœŸä¼‘æ—¥">åœŸä¼‘æ—¥</option>
  </select>
</label>
<label>å§‹ç™ºé§…ç™ºæ—¥: <input id="startDate" type="date"></label><br>
<label>å§‹ç™ºé§…: <input id="origin" type="text"></label>
<label>çµ‚ç€é§…: <input id="destination" type="text"></label>
<label>è·¯ç·šå: <input id="line" type="text"></label>
<label>é€Ÿåº¦ç¨®åˆ¥: <input id="speed" type="text"></label>
<label>åˆ—è»Šå: <input id="name" type="text"></label>

<h2>åœè»Šé§…ã®è¿½åŠ </h2>
<table>
  <thead>
    <tr><th>é§…å</th><th>ç€</th><th>ç™º</th><th>ç•ªç·š</th></tr>
  </thead>
  <tbody id="stopsTable"></tbody>
</table>

<label>é§…å: <input id="station" type="text"></label>
<label>ç€: <input id="arrival" type="text" placeholder="hh:mm:ss"></label>
<label>ç™º(é€š): <input id="departure" type="text" placeholder="hh:mm:ss"></label>
<label>ç•ªç·š: <input id="trackN" type="text"></label>
<button onclick="addStop()">è¿½åŠ </button>

<h2>å‡ºåŠ›JSON</h2>
<textarea id="jsonOutput" readonly></textarea>
<button onclick="copyJson()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>

<br><br>
<label>ã€æ›¸ãæ–¹ã€‘</label><br>
<label>ãƒ»é§…åãŒï¼’æ–‡å­—ã®å ´åˆã¯"å¤§ã€€å®®"ã®ã‚ˆã†ã«å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ï¼‘ã¤ã‚’é–‹ã‘ã¦å…¥åŠ›ã™ã‚‹ã“ã¨</label><br>
<label>ãƒ»é§…åã¯ï¼”æ–‡å­—ã¾ã§ã€‚</label><br>
<label>ãƒ»ç€ç™ºç•ªç·šã§ã¯ã€æ•°å­—ã¯å…¨è§’ã§å…¥åŠ›ã€‚10ç•ªç·šã®å ´åˆã¯"ï¼‘ï¼ç•ª"ã®ã‚ˆã†ã«å…¥åŠ›ã™ã‚‹ã“ã¨</label><br>
<label>ãƒ»ãƒ¢ãƒã‚¤ãƒ«ATOSã«æº–ãšã‚‹</label>

<script>
  const stops = [];

  function addStop() {
    const station = document.getElementById("station");
    const arrival = document.getElementById("arrival");
    const departure = document.getElementById("departure");
    const trackN = document.getElementById("trackN");

    if (!station.value) return;

    stops.push({
      station: station.value,
      arrival: arrival.value,
      departure: departure.value,
      trackN: trackN.value
    });

    station.value = "";
    arrival.value = "";
    departure.value = "";
    trackN.value = "";

    updateTable();
    updateJSON();
    station.focus();
  }

  function updateTable() {
    const tbody = document.getElementById("stopsTable");
    tbody.innerHTML = "";
    stops.forEach((stop, i) => {
      const row = `<tr>
        <td>${stop.station}</td>
        <td>${stop.arrival}</td>
        <td>${stop.departure}</td>
        <td>${stop.trackN}</td>
        <td><button onclick="removeStop(${i})">å‰Šé™¤</button></td>
      </tr>`;
      tbody.insertAdjacentHTML("beforeend", row);
    });
  }

  function removeStop(index) {
    stops.splice(index, 1);
    updateTable();
    updateJSON();
  }

  function updateJSON() {
    const output = {
      trainNumber: document.getElementById("trainNumber").value,
      type: document.getElementById("type").value,
      dayType: document.getElementById("dayType").value,
      startDate: document.getElementById("startDate").value,
      origin: document.getElementById("origin").value,
      destination: document.getElementById("destination").value,
      speed: document.getElementById("speed").value,
      name: document.getElementById("name").value,
      line: document.getElementById("line").value,
      stops
    };
    document.getElementById("jsonOutput").value = JSON.stringify(output, null, 2);
  }

  function copyJson() {
    navigator.clipboard.writeText(document.getElementById("jsonOutput").value);
    alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
  }
</script>
</body>
</html>
