<!DOCTYPE html>
<html lang="ja">
<head>
Â  <meta charset="UTF-8" />
Â  <title>åˆ—è»Šåˆ¥ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ‹ã‚¿</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: "MS PGothic", sans-serif;
Â  Â  Â  font-weight: bold;
Â  Â  Â  background-color: #ffffff;
Â  Â  Â  color: #000000;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  }

Â  Â  header {
Â  Â  Â  background-color: #01977a;
Â  Â  Â  color: white;
Â  Â  Â  padding: 10px;
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  .container {
Â  Â  Â  margin: 20px;
Â  Â  }

Â  Â  .selection-header {
Â  Â  Â  background-color: #01977a;
Â  Â  Â  color: white;
Â  Â  Â  padding: 8px 12px;
Â  Â  Â  display: inline-block;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  border-radius: 5px;
Â  Â  }

Â  Â  .selection {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  gap: 15px;
Â  Â  }

Â  Â  .selection label {
Â  Â  Â  margin-right: 8px;
Â  Â  }

Â  Â  .selection select,
Â  Â  .selection input {
Â  Â  Â  padding: 5px;
Â  Â  }

Â  Â  .selection-group {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  .hidden {
Â  Â  Â  display: none;
Â  Â  }

Â  Â  table {
Â  Â  Â  width: 80%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  margin-top: 20px;
Â  Â  }

Â  Â  table, th, td {
Â  Â  Â  border: 1px solid #01977a;
Â  Â  }

Â  Â  th, td {
Â  Â  Â  padding: 6px;
Â  Â  Â  line-height: 1.2;
Â  Â  }
Â Â 
Â  Â  th {
Â  Â  Â  background-color: #01977a;
Â  Â  Â  color: white;
Â  Â  Â  padding: 10px;
Â  Â  Â  text-align: left;
Â  Â  }

Â  Â  td {
Â  Â  Â  padding: 10px;
Â  Â  Â  color: #000;
Â  Â  Â  background-color: #ffffff;
Â  Â  }

Â  Â  .back-button,
Â  Â  .display-button {
Â  Â  Â  margin-top: 20px;
Â  Â  Â  display: inline-block;
Â  Â  Â  padding: 10px 20px;
Â  Â  Â  background-color: #01977a;
Â  Â  Â  color: white;
Â  Â  Â  text-decoration: none;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .back-button:hover,
Â  Â  .display-button:hover {
Â  Â  Â  background-color: #017a63;
Â  Â  }

Â  Â  #error-log {
Â  Â  Â  background-color: #ffcccc;
Â  Â  Â  color: #990000;
Â  Â  Â  padding: 10px;
Â  Â  Â  margin: 10px 0;
Â  Â  Â  border: 1px solid #990000;
Â  Â  Â  display: none;
Â  Â  }
Â  </style>
</head>
<body>
Â  <header>
Â  Â  <h1>åˆ—è»Šåˆ¥ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ‹ã‚¿</h1>
Â  </header>
Â  <div class="container">
Â  Â  <a href="../toppage.html" class="back-button">å‰ã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
Â  Â  <a href="alltrain.html">ç™»éŒ²åˆ—è»Šä¸€è¦§ã‚’è¦‹ã‚‹</a>

Â  Â  <div id="error-log"></div>

Â  Â Â 
Â  Â  <div class="selection">
Â  Â  Â  <div class="selection-header">è¡¨ç¤ºå†…å®¹é¸æŠ</div>
Â  Â  Â  <div class="selection-group">
Â  Â  Â  Â  <label for="line">ç·šåŒº:</label>
Â  Â  Â  Â  <select id="line">
            Â  Â  Â    </select>
Â  Â  Â  </div>
Â  Â  Â  <div class="selection-group hidden" id="date-selector-container">
Â  Â  Â    <label for="select-date">æ–½è¡Œæ—¥:</label>
Â  Â  Â    <select id="select-date"></select>
Â  Â  Â  </div>
Â  Â  Â  <div class="selection-group">
Â  Â  Â  Â  <label for="train-number">åˆ—è»Šç•ªå·:</label>
Â  Â  Â  Â  <select id="crown">
Â  Â  Â  Â  Â  <option value="">ã™ã¹ã¦</option>
Â  Â  Â  Â  </select>
Â  Â  Â  Â  <input type="text" id="train-number" pattern="^[0-9].*" placeholder="ä¾‹: 123M">
Â  Â  Â  </div>
Â  Â  Â  <button class="display-button" id="display-button">è¡¨ç¤º</button>
Â  Â  </div>

Â  Â Â 
Â  Â  <div id="train-info" style="margin-top: 10px; display: none;">
Â  Â  Â  <p>â– <span id="info-line"></span>ã€€æ–½è¡Œæ—¥: <span id="info-date"></span></p>
Â  Â  Â  <p>é‹è»¢åŒºé–“: <span id="operation-section"></span>ã€€åˆ—è»Šç•ªå·ï¼š<span id="train-id"></span></p>
Â  Â  Â  <table style="max-width: 500px;">
Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  <tr><td>å¹³æ—¥/åœŸä¼‘æ—¥</td><td id="info-daytype"></td></tr>
Â  Â  Â  Â  Â  <tr><td>é€Ÿåº¦ç¨®åˆ¥</td><td id="info-speed"></td></tr>
Â  Â  Â  Â  Â  <tr><td>åˆ—è»Šå</td><td id="info-name"></td></tr>
Â  Â  Â  Â  </tbody>
Â  Â  Â  </table>
Â  Â  </div>

Â  Â  <table style="width: 100%;">
Â  Â  Â  <thead>
Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  <th style="width: 50px;">åˆ—è»Šç¨®åˆ¥</th>
Â  Â  Â  Â  Â  <th style="width: 100px;">é§…å</th>
Â  Â  Â  Â  Â  <th style="width: 100px;">ç€æ™‚åˆ»</th>
Â  Â  Â  Â  Â  <th style="width: 100px;">ç™ºæ™‚åˆ»</th>
Â  Â  Â  Â  Â  <th style="width: 50px;">ç•ªç·š</th>
Â  Â  Â  Â  </tr>
Â  Â  Â  </thead>
Â  Â  Â  <tbody id="timetable"></tbody>
Â  Â  </table>
Â  </div>

Â  <script>
    // =========================================================================
    // è¿½åŠ ãƒ»å¤‰æ›´ã—ãŸãƒ­ã‚¸ãƒƒã‚¯ã¯ã“ã“ã§ã™
    // =========================================================================
Â  Â  let timetableData = [];
Â  Â  let currentMatches = [];
    
    // DOMè¦ç´ ã®å–å¾—
Â  Â  const lineSelect = document.getElementById("line");
Â  Â  const crownSelect = document.getElementById("crown");
Â  Â  const trainNumberInput = document.getElementById("train-number");
Â  Â  const displayButton = document.getElementById("display-button");
Â  Â  const errorLog = document.getElementById("error-log");
Â  Â  const dateSelectorContainer = document.getElementById("date-selector-container");
Â  Â  const selectDate = document.getElementById("select-date");

    // ğŸš¨ ç·šåŒºãƒªã‚¹ãƒˆå®šç¾© (ã“ã®éƒ¨åˆ†ã‚’ç·¨é›†ã—ã¦ã€ãŠä½¿ã„ã®ç·šåŒºã«åˆã‚ã›ã¦ãã ã•ã„) ğŸš¨
    const manuallyDefinedLines = {
        "initial": [
            { value: "", text: "ç·šåŒºã‚’é¸æŠ" }, 
            { value: "select_JRåŒ—æµ·é“", text: "â–¶ï¸ JRåŒ—æµ·é“" },
            { value: "select_JRæ±æ—¥æœ¬", text: "â–¶ï¸ JRæ±æ—¥æœ¬" },
            { value: "select_JRæ±æµ·", text: "â–¶ï¸ JRæ±æµ·" },
            { value: "select_JRè¥¿æ—¥æœ¬", text: "â–¶ï¸ JRè¥¿æ—¥æœ¬" },
            { value: "select_JRä¹å·", text: "â–¶ï¸ JRä¹å·" },
            { value: "select_æ±æ—¥æœ¬ç§é‰„", text: "â–¶ï¸ æ±æ—¥æœ¬ç§é‰„" },
            { value: "select_ãã®ä»–", text: "â–¶ï¸ ãã®ä»–" }
        ],
        "JRåŒ—æµ·é“": [
            { value: "back_to_company", text: "â—€ï¸ äº‹æ¥­è€…é¸æŠã«æˆ»ã‚‹" }, 
            { value: "", text: "ã™ã¹ã¦" },
            { value: "å‡½é¤¨æœ¬ç·š", text: "å‡½é¤¨æœ¬ç·š" }, 
            { value: "å®¤è˜­æœ¬ç·š", text: "å®¤è˜­æœ¬ç·š" }, 
        ],
        "JRæ±æ—¥æœ¬": [
            { value: "back_to_company", text: "â—€ï¸ äº‹æ¥­è€…é¸æŠã«æˆ»ã‚‹" }, 
            { value: "", text: "ã™ã¹ã¦" },
            { value: "ä¸­å¤®æœ¬ç·š", text: "ä¸­å¤®æœ¬ç·š" }, 
            { value: "æ±åŒ—æœ¬ç·š", text: "æ±åŒ—æœ¬ç·š" }, 
        ],
        "JRæ±æµ·": [
            { value: "back_to_company", text: "â—€ï¸ äº‹æ¥­è€…é¸æŠã«æˆ»ã‚‹" }, 
            { value: "", text: "ã™ã¹ã¦" },
            { value: "æ±æµ·é“æœ¬ç·š(æµ·)", text: "æ±æµ·é“æœ¬ç·š(æµ·)" }, 
            { value: "ä¸­å¤®æœ¬ç·š(æµ·)", text: "ä¸­å¤®æœ¬æœ¬ç·š(æµ·)" }, 
        ],
        "JRè¥¿æ—¥æœ¬": [
            { value: "back_to_company", text: "â—€ï¸ äº‹æ¥­è€…é¸æŠã«æˆ»ã‚‹" }, 
            { value: "", text: "ã™ã¹ã¦" },
            { value: "æ±æµ·é“æœ¬ç·š(è¥¿)", text: "æ±æµ·é“æœ¬ç·š(è¥¿)" }, 
            { value: "å±±é™½æœ¬ç·š", text: "å±±é™½æœ¬ç·š" }, 
        ],
        "JRä¹å·": [
            { value: "back_to_company", text: "â—€ï¸ äº‹æ¥­è€…é¸æŠã«æˆ»ã‚‹" }, 
            { value: "", text: "ã™ã¹ã¦" },
            { value: "é¹¿å…å³¶æœ¬ç·š", text: "é¹¿å…å³¶æœ¬ç·š" }, 
            { value: "æ—¥è±Šæœ¬ç·š", text: "æ—¥è±Šæœ¬ç·š" }, 
        ],
        "æ±æ—¥æœ¬ç§é‰„": [
            { value: "back_to_company", text: "â—€ï¸ äº‹æ¥­è€…é¸æŠã«æˆ»ã‚‹" }, 
            { value: "", text: "ã™ã¹ã¦" },
            { value: "æ±æ­¦ä¼Šå‹¢å´ç·š", text: "æ±æ­¦ä¼Šå‹¢å´ç·š" }, 
            { value: "äº¬ç‹ç·š", text: "äº¬ç‹ç·š" }, 
        ],
        "ãã®ä»–": [
            { value: "back_to_company", text: "â—€ï¸ äº‹æ¥­è€…é¸æŠã«æˆ»ã‚‹" }, 
            { value: "", text: "ã™ã¹ã¦" },
            { value: "ãã®ä»–ã®ç·šåŒºA", text: "ãã®ä»–ã®ç·šåŒºA" }, 
        ]
    };
    
    let currentLineSelectionState = "initial"; 

    /** ç·šåŒºãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã®å†…å®¹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•° */
    function updateLineOptions(stateKey) {
        lineSelect.innerHTML = ''; 
        const optionsToDisplay = manuallyDefinedLines[stateKey] || [];

        optionsToDisplay.forEach(item => {
            const opt = document.createElement("option");
            opt.value = item.value;
            opt.textContent = item.text;
            lineSelect.appendChild(opt);
        });
        
        currentLineSelectionState = stateKey; 
    }
    // =========================================================================


Â  Â  async function loadTimetableData() {
Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch("timetables.json");
Â  Â  Â  Â  if (!res.ok) {
Â  Â  Â  Â  Â  throw new Error(`JSONãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ (${res.status} ${res.statusText})`);
Â  Â  Â  Â  }
Â  Â  Â  Â  timetableData = await res.json();
Â  Â  Â  Â  if (!Array.isArray(timetableData) || timetableData.length === 0) {
Â  Â  Â  Â  Â  throw new Error("timetables.jsonã«æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒç©ºã‹ã€å½¢å¼ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚");
Â  Â  Â  Â  }

        // ğŸš¨ ç·šåŒºãƒªã‚¹ãƒˆã®åˆæœŸåŒ–ã‚’äºŒæ®µéšé¸æŠæ–¹å¼ã«å¤‰æ›´ ğŸš¨
        updateLineOptions("initial");

        // å† ã®èª­ã¿è¾¼ã¿ (å¤‰æ›´ãªã—)
Â  Â  Â  Â  const crowns = [...new Set(timetableData.map(t => t.crown).filter(c => c))].sort();
Â  Â  Â  Â  crownSelect.innerHTML = `<option value="">ã™ã¹ã¦</option>`;
Â  Â  Â  Â  crowns.forEach(c => {
Â  Â  Â  Â  Â  const opt = document.createElement("option");
Â  Â  Â  Â  Â  opt.value = c;
Â  Â  Â  Â  Â  opt.textContent = c;
Â  Â  Â  Â  Â  crownSelect.appendChild(opt);
Â  Â  Â  Â  });
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  errorLog.textContent = "ã‚¨ãƒ©ãƒ¼: " + e.message;
Â  Â  Â  Â  errorLog.style.display = "block";
Â  Â  Â  Â  displayButton.disabled = true;
Â  Â  Â  Â  trainNumberInput.disabled = true;
Â  Â  Â  Â  lineSelect.disabled = true;
Â  Â  Â  Â  crownSelect.disabled = true;
Â  Â  Â  }
Â  Â  }

Â  Â  function displayTrain(train) {
        // å¤‰æ›´ãªã—
Â  Â  Â  document.getElementById("train-info").style.display = "block";
Â  Â  Â  document.getElementById("info-line").textContent = train.line;
Â  Â  Â  document.getElementById("info-date").textContent = train.startDate;
Â  Â  Â  document.getElementById("train-id").textContent = train.trainNumber;
Â  Â  Â  document.getElementById("operation-section").textContent = train.origin + "ã€œ" + train.destination;
Â  Â  Â  document.getElementById("info-daytype").textContent = train.dayType;
Â  Â  Â  document.getElementById("info-speed").textContent = train.speed;
Â  Â  Â  document.getElementById("info-name").textContent = train.name;

Â  Â  Â  const tbody = document.getElementById("timetable");
Â  Â  Â  tbody.innerHTML = "";
Â  Â  Â  train.stops.forEach((stop, index) => {
Â  Â  Â  Â  const tr = document.createElement("tr");
Â  Â  Â  Â  tr.innerHTML = `
Â  Â  Â  Â  Â  <td>${index === 0 ? train.type : ""}</td>
Â  Â  Â  Â  Â  <td>${stop.station}</td>
Â  Â  Â  Â  Â  <td>${stop.arrival || "â€¦"}</td>
Â  Â  Â  Â  Â  <td>${stop.departure || "â€¦"}</td>
Â  Â  Â  Â  Â  <td>${stop.trackN || ""}</td>
Â  Â  Â  Â  `;
Â  Â  Â  Â  tbody.appendChild(tr);
Â  Â  Â  });
Â  Â  }
Â  Â Â 
Â  Â  async function searchTrain() {
Â  Â  Â  // ğŸš¨ äºŒæ®µéšé¸æŠã®ãŸã‚ã®ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ  ğŸš¨
Â  Â  Â  const line = lineSelect.value;
      if (currentLineSelectionState === "initial" && (line === "" || line.startsWith("select_"))) {
          errorLog.textContent = "å…·ä½“çš„ãªç·šåŒºã‚’é¸æŠã—ã¦ã‹ã‚‰ã€Œè¡¨ç¤ºã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚";
          errorLog.style.display = "block";
          return;
      }
      if (line === "back_to_company") {
          errorLog.textContent = "å…·ä½“çš„ãªç·šåŒºã‚’é¸æŠã™ã‚‹ã‹ã€ç·šåŒºæŒ‡å®šã‚’ç©ºæ¬„ï¼ˆã™ã¹ã¦ï¼‰ã«ã—ã¦ãã ã•ã„ã€‚";
          errorLog.style.display = "block";
          return;
      }


Â  Â  Â  const number = trainNumberInput.value.trim();
Â  Â  Â  const crown = crownSelect.value;

Â  Â  Â  if (number !== "" && !trainNumberInput.checkValidity()) {
Â  Â  Â  Â  errorLog.textContent = "åˆ—è»Šç•ªå·ã¯æ•°å­—ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚";
Â  Â  Â  Â  errorLog.style.display = "block";
Â  Â  Â  Â  document.getElementById("train-info").style.display = "none";
Â  Â  Â  Â  document.getElementById("timetable").innerHTML = "";
Â  Â  Â  Â  document.getElementById("date-selector-container").classList.add("hidden");
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  if (number !== "" && crown !== "" && number.includes(crown)) {
Â  Â  Â  Â  errorLog.textContent = "åˆ—è»Šç•ªå·ã«ç¨®åˆ¥å† ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€æ¤œç´¢ã§ãã¾ã›ã‚“ã€‚";
Â  Â  Â  Â  errorLog.style.display = "block";
Â  Â  Â  Â  document.getElementById("train-info").style.display = "none";
Â  Â  Â  Â  document.getElementById("timetable").innerHTML = "";
Â  Â  Â  Â  document.getElementById("date-selector-container").classList.add("hidden");
Â  Â  Â  Â  return;
Â  Â  Â  }

      // åˆ—è»Šç•ªå·ã¨å† ãŒä¸¡æ–¹ç©ºã§ã€ã‹ã¤ç·šåŒºãŒç©ºï¼ˆã™ã¹ã¦ï¼‰ã®å ´åˆã‚‚ã‚¨ãƒ©ãƒ¼
      if (number === "" && crown === "" && line === "") {
          errorLog.textContent = "æ¤œç´¢æ¡ä»¶ã‚’ä¸€ã¤ä»¥ä¸ŠæŒ‡å®šã—ã¦ãã ã•ã„ã€‚";
          errorLog.style.display = "block";
          return;
      }

      // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå¤‰æ›´ãªã—ï¼‰
Â  Â  Â  currentMatches = timetableData.filter(t => {
Â  Â  Â  Â  const normalizedTrainNumber = t.trainNumber.replace(/^[^0-9]+/, '');
Â  Â  Â  Â  // lineãŒ""ã®å ´åˆã€lineã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹
Â  Â  Â  Â  return (normalizedTrainNumber === number || number === "") &&Â 
Â  Â  Â  Â  Â  Â  Â  Â (line === "" || t.line === line) &&
Â  Â  Â  Â  Â  Â  Â  Â (crown === "" || t.crown === crown);
Â  Â  Â  });

Â  Â  Â  if (currentMatches.length === 0) {
Â  Â  Â  Â  errorLog.textContent = "åˆ—è»ŠãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚";
Â  Â  Â  Â  errorLog.style.display = "block";
Â  Â  Â  Â  document.getElementById("train-info").style.display = "none";
Â  Â  Â  Â  document.getElementById("timetable").innerHTML = "";
Â  Â  Â  Â  document.getElementById("date-selector-container").classList.add("hidden");
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  errorLog.style.display = "none";

Â  Â  Â  if (currentMatches.length === 1) {
Â  Â  Â  Â  document.getElementById("date-selector-container").classList.add("hidden");
Â  Â  Â  Â  displayTrain(currentMatches[0]);
Â  Â  Â  } else {
Â  Â  Â  Â  const dateSelect = document.getElementById("select-date");
Â  Â  Â  Â  const uniqueDates = [...new Set(currentMatches.map(d => d.startDate))];
Â  Â  Â  Â  dateSelect.innerHTML = uniqueDates.map(d => `<option value="${d}">${d}</option>`).join("");
Â  Â  Â  Â  document.getElementById("date-selector-container").classList.remove("hidden");
Â  Â  Â  Â  displayTrain(currentMatches[0]);
Â  Â  Â  }
Â  Â  };

Â  Â  // ğŸš¨ ç·šåŒºãƒ—ãƒ«ãƒ€ã‚¦ãƒ³å¤‰æ›´æ™‚ã®å‡¦ç†ã‚’è¿½åŠ  ğŸš¨
    lineSelect.addEventListener("change", function() {
        const selectedValue = this.value;
        
        // 1. äº‹æ¥­è€…é¸æŠé …ç›®ã ã£ãŸå ´åˆ (ä¾‹: "select_JRæ±æ—¥æœ¬")
        if (selectedValue.startsWith("select_")) {
            const companyName = selectedValue.substring(7); // "select_" ã¯7æ–‡å­—
            updateLineOptions(companyName);
        
        // 2. æˆ»ã‚‹ãƒœã‚¿ãƒ³ã ã£ãŸå ´åˆ (ä¾‹: "back_to_company")
        } else if (selectedValue === "back_to_company") {
            updateLineOptions("initial");
        }
    });

Â  Â  document.getElementById("display-button").addEventListener("click", searchTrain);

Â  Â  document.getElementById("train-number").addEventListener("keypress", function (event) {
Â  Â  Â  if (event.key === "Enter") {
Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  searchTrain();
Â  Â  Â  }
Â  Â  });
Â  Â  Â Â 
Â  Â  document.getElementById("select-date").addEventListener("change", function () {
Â  Â  Â  const selected = currentMatches.find(m => m.startDate === this.value);
Â  Â  Â  if (selected) displayTrain(selected);
Â  Â  });

    // åˆ—è»Šç•ªå·å…¥åŠ›æ™‚ã¨å† é¸æŠæ™‚ã®é€£å‹•å‡¦ç† (å…ƒã®ã‚³ãƒ¼ãƒ‰ã«ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€åˆ©ä¾¿æ€§ã®ãŸã‚ã«æ®‹ã—ã¾ã™)
    document.getElementById("crown").addEventListener("change", function () {
        if (this.value !== "") {
            document.getElementById("train-number").disabled = true;
            document.getElementById("train-number").value = ""; 
        } else {
            document.getElementById("train-number").disabled = false;
        }
    });

    document.getElementById("train-number").addEventListener("input", function() {
        if (this.value.trim() !== "") {
            document.getElementById("crown").disabled = true;
            document.getElementById("crown").value = ""; 
        } else {
            document.getElementById("crown").disabled = false;
        }
    });
Â  Â  Â Â 
Â  Â  loadTimetableData();
Â  Â Â 
Â  </script>
</body>
</html>
