<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±äº¬åœè¼¸é€æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ  ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</title>
    <style>
        /* æ—¢å­˜ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å…¨ã¦ä¿æŒ */
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            max-width: 800px;
            width: 95%;
            /* èªè¨¼æˆåŠŸã¾ã§éè¡¨ç¤º */
            display: none; 
        }
        #loading-page {
            text-align: center;
            font-size: 1.2rem;
            color: #01977a;
        }
        h1 {
            color: #01977a;
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        .button-container {
            display: grid;
            gap: 0.8rem;
        }
        .button {
            background-color: #01977a;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 3px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: left;
            font-weight: bold;
        }
        .button:hover {
            background-color: #017a64;
        }
        .info {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #e8f8f5;
            border-radius: 3px;
            border-left: 5px solid #01977a;
        }
        .info h2 {
            color: #01977a;
            margin-top: 0;
            font-size: 1.2rem;
            margin-bottom: 6px;
        }
        .info ul {
            padding-left: 1.2rem;
        }
        .info p {
            margin: 4px 0;
        }
        .additional-section {
            margin-top: 2rem;
            padding: 1rem;
            background-color: #f9f9f9;
            border-radius: 3px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
        .additional-section h2 {
            font-size: 1.4rem;
            color: #017a64;
            margin-bottom: 1rem;
        }
        .logout-container {
            text-align: right;
            margin-top: 1rem;
        }
        .logout-button {
            background-color: #d9534f;
            color: white;
            border: none;
            padding: 0.8rem 1.2rem;
            border-radius: 3px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .logout-button:hover {
            background-color: #c9302c;
        }
    </style>
</head>
<body>
    
    <div id="loading-page">
        <p>èªè¨¼æƒ…å ±ã‚’ç¢ºèªä¸­ã§ã™...ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚</p>
    </div>

    <div class="container" id="main-container">
        <p id="user-info" style="text-align: right; margin-bottom: 1rem; font-weight: bold;"></p>
        
        <h1>æ±äº¬åœè¼¸é€æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ </h1>
        <div class="button-container">
            
            <button class="button" onclick="location.href='ATOSlocation.html'">ATOSåœ¨ç·šãƒ¢ãƒ‹ã‚¿</button>
            <button class="button" onclick="location.href='train_zai-data.html'">åˆ—è»Šåœ¨ç·šçŠ¶æ³ä¸€è¦§è¡¨</button>
            <button class="button" onclick="location.href='train_grasp.html'">é‹è¡ŒæŠŠæ¡ãƒ¢ãƒ‹ã‚¿</button>
            <button class="button" onclick="location.href='T-time/mobileatos.html'">ATOSãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ‹ã‚¿</button>
            <button class="button" onclick="location.href='train_info.html'">é‹è¡Œæƒ…å ±ä¸€è¦§</button>
            <button class="button" onclick="location.href='JRFtest/jr_freight_status.html'">è²¨ç‰©è¼¸é€çŠ¶æ³</button>
            <button class="button" onclick="location.href='JREgyoumu/JREtop.html'">æ±æ—¥æœ¬æ—…å®¢é‰„é“ã‚·ã‚¹ãƒ†ãƒ ãƒšãƒ¼ã‚¸</button>
            <button class="button" onclick="location.href='eastaria-info.html'">ä»–ä¼šç¤¾ç·šé‹è¡Œæƒ…å ±</button>
            <button class="button" onclick="location.href='flight/DAsystem.html'">é›¢ç€é™¸ç™ºç€ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ </button>
            <button class="button" onclick="location.href='T-time/T-time.html'">åˆ—è»Šæ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ </button>
            <button class="button" onclick="location.href='unnyou/unnyouindex.html'">é‹ç”¨æƒ…å ±æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ </button>
            <button class="button" onclick="location.href='unnyou/datacreate.html'">é‹ç”¨ãƒ‡ãƒ¼ã‚¿ä½œæˆãƒ„ãƒ¼ãƒ«</button>
            <button class="button" onclick="location.href='timeedit.html'">æ™‚åˆ»è¡¨ãƒ‡ãƒ¼ã‚¿ä½œæˆãƒ„ãƒ¼ãƒ«</button>
            <button class="button" onclick="location.href='tobu-zai.html'">æ±æ­¦ç·šåœ¨ç·šãƒ¢ãƒ‹ã‚¿</button>
            <button class="button" onclick="location.href='keisei-zai.html'">äº¬æˆç·šåœ¨ç·šãƒ¢ãƒ‹ã‚¿</button>
            <button class="button" onclick="location.href='zaisen-JRE.html'">JRæ±æ—¥æœ¬é§…åˆ—è»Šåœ¨ç·šãƒ¢ãƒ‹ã‚¿</button>
            <button class="button" onclick="location.href='TWR-top.html'">ã‚Šã‚“ã‹ã„ç·šã‚·ã‚¹ãƒ†ãƒ ãƒšãƒ¼ã‚¸</button>
            <button class="button" onclick="location.href='Flightpage.html'">ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ãƒšãƒ¼ã‚¸</button>
            <button class="button" onclick="location.href='ekibetu.html'">é§…åˆ¥ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ‹ã‚¿</button>
            <button class="button" onclick="location.href='train_ressyabetu.html'">åˆ—è»Šåˆ¥ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ‹ã‚¿</button>

            </div>
        <div class="info">
            <h2>ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h2>
            <p>æœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã€å…¬å…±äº¤é€šã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã«ã‚ˆã‚Šæä¾›ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚</p>
            <p>ãƒ‡ãƒ¼ã‚¿ã¯å„å…¬å…±äº¤é€šäº‹æ¥­è€…ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦ã„ã¾ã™ãŒã€å¿…ãšã—ã‚‚æ­£ç¢ºãƒ»å®Œå…¨ãªã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <p>å®Ÿéš›ã®é‹è¡ŒçŠ¶æ³ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã®ã§ã€ã‚ã‚‰ã‹ã˜ã‚ã”äº†æ‰¿ãã ã•ã„ã€‚</p>
            <p>æœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®è¡¨ç¤ºå†…å®¹ã«ã¤ã„ã¦ã€å…¬å…±äº¤é€šäº‹æ¥­è€…ã¸ã®ç›´æ¥ã®å•åˆã›ã¯è¡Œã‚ãªã„ã§ãã ã•ã„ã€‚</p>
            <p>æœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«é–¢ã™ã‚‹ã”è³ªå•ã‚„ã”æ„è¦‹ã¯ã€ä»¥ä¸‹ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚</p>
            <p><a href="mailto:tayutayu368@gmail.com">tayutayu368@gmail.com</a></p>
        </div>

        <div class="additional-section">
            <h2>ãã®ä»–</h2>
            <div class="button-container">
                <button class="button" onclick="location.href='outside.html'">å¤–éƒ¨ã‚µã‚¤ãƒˆ</button>
            </div>
        </div>
        <div class="logout-container">
            <button class="logout-button" id="firebase-logout-button">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --------------------------------------------------------------------------
        // ğŸš¨ ã€é‡è¦ã€‘ã”è‡ªèº«ã® Firebase è¨­å®šã«ç½®ãæ›ãˆã¦ãã ã•ã„
        // --------------------------------------------------------------------------
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY", 
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Firebase ã®åˆæœŸåŒ–
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth(); 

        const mainContainer = document.getElementById('main-container');
        const loadingPage = document.getElementById('loading-page');
        const userInfo = document.getElementById('user-info');
        const logoutButton = document.getElementById('firebase-logout-button');
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆãƒ€ãƒŸãƒ¼ãƒ¡ãƒ¼ãƒ«ï¼‰ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function getUserIdFromEmail(email) {
            // @system.local ã®éƒ¨åˆ†ã‚’å‰Šé™¤
            return email.split('@')[0];
        }
        
        // ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ã‚¬ãƒ¼ãƒ‰ (Firebaseèªè¨¼çŠ¶æ…‹ã®ç¢ºèª)
        auth.onAuthStateChanged((user) => {
            if (user) {
                // èªè¨¼æ¸ˆã¿ã®å ´åˆ: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
                loadingPage.style.display = 'none';
                mainContainer.style.display = 'block';
                
                // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’è¡¨ç¤º
                const userId = getUserIdFromEmail(user.email);
                userInfo.textContent = `ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ${userId} ã§ãƒ­ã‚°ã‚¤ãƒ³ä¸­`;

            } else {
                // æœªèªè¨¼ã®å ´åˆï¼šãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸å¼·åˆ¶ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
                alert("ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒåˆ‡ã‚Œã¾ã—ãŸã€‚");
                window.location.href = 'index.html';
            }
        });

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç† (Firebase signOut)
        async function firebaseLogout() {
            const confirmed = confirm("æœ¬å½“ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ");
            if (confirmed) {
                try {
                    await auth.signOut();
                    // signOutå¾Œã€onAuthStateChangedãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã€è‡ªå‹•ã§index.htmlã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
                } catch (error) {
                    console.error('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                    alert('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                }
            }
        }

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã«Firebaseã®ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å‰²ã‚Šå½“ã¦ã‚‹
        if (logoutButton) {
            logoutButton.addEventListener('click', firebaseLogout);
        }
    });
    </script>
</body>
</html>
